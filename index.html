<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Card Generator | T·∫°o Th·∫ª Sinh Vi√™n</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- html2canvas for downloading card as image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .student-card {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .student-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
        }

        .card-header {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(10px);
        }

        .photo-placeholder {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 4px solid white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .barcode {
            background: repeating-linear-gradient(90deg,
                    #000 0px,
                    #000 2px,
                    #fff 2px,
                    #fff 4px);
            height: 60px;
            opacity: 0.9;
        }

        .input-field {
            transition: all 0.3s ease;
        }

        .input-field:focus {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-country {
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-country:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        .btn-download {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            transition: all 0.3s ease;
        }

        .btn-download:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4);
        }

        .upload-zone {
            border: 2px dashed #cbd5e1;
            transition: all 0.3s ease;
        }

        .upload-zone:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .copy-btn {
            transition: all 0.2s ease;
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .avatar-option {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .avatar-option:hover {
            transform: scale(1.05);
            border-color: #667eea;
        }

        .avatar-option.selected {
            border-color: #667eea;
            box-shadow: 0 0 0 2px #667eea;
        }
    </style>
</head>

<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-6 fade-in">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-3">
                üéì Student Card Generator
            </h1>
            <p class="text-white text-lg opacity-90 mb-4">
                Create professional student ID cards for Japanese, Korean, US, Indian Universities
            </p>

            <!-- Country Buttons -->
            <div class="flex flex-wrap justify-center gap-3 mb-4">
                <button onclick="generateByCountry('india')"
                    class="btn-country bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center gap-2">
                    <span class="text-xl">üáÆüá≥</span> INDIA
                </button>
                <button onclick="generateByCountry('us')"
                    class="btn-country bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2">
                    <span class="text-xl">üá∫üá∏</span> US
                </button>
                <button onclick="generateByCountry('korea')"
                    class="btn-country bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg flex items-center gap-2">
                    <span class="text-xl">üá∞üá∑</span> KOREA
                </button>
                <button onclick="generateByCountry('japan')"
                    class="btn-country bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg flex items-center gap-2">
                    <span class="text-xl">üáØüáµ</span> JAPAN
                </button>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Left Side - Form Section -->
            <div class="glass-card rounded-2xl shadow-2xl p-6 md:p-8 fade-in">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                        </path>
                    </svg>
                    Th√¥ng Tin Sinh Vi√™n
                </h2>

                <form id="studentForm" class="space-y-4">
                    <!-- Full Name -->
                    <div>
                        <label for="fullName" class="block text-sm font-semibold text-gray-700 mb-2">
                            H·ªç v√† T√™n
                        </label>
                        <input type="text" id="fullName"
                            class="input-field w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:outline-none"
                            placeholder="Nguy·ªÖn VƒÉn A" maxlength="40">
                    </div>

                    <!-- Date of Birth -->
                    <div>
                        <label for="dob" class="block text-sm font-semibold text-gray-700 mb-2">
                            Ng√†y Sinh
                        </label>
                        <input type="date" id="dob"
                            class="input-field w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:outline-none">
                    </div>

                    <!-- Student ID -->
                    <div>
                        <label for="studentId" class="block text-sm font-semibold text-gray-700 mb-2">
                            M√£ Sinh Vi√™n
                        </label>
                        <input type="text" id="studentId"
                            class="input-field w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:outline-none"
                            placeholder="SV123456" maxlength="20">
                    </div>

                    <!-- Department -->
                    <div>
                        <label for="department" class="block text-sm font-semibold text-gray-700 mb-2">
                            Khoa / Chuy√™n Ng√†nh
                        </label>
                        <input type="text" id="department"
                            class="input-field w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:outline-none"
                            placeholder="Computer Science" maxlength="60">
                    </div>

                    <!-- Email -->
                    <div>
                        <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
                            Email Sinh Vi√™n
                        </label>
                        <div class="flex gap-2">
                            <input type="email" id="email"
                                class="input-field flex-1 px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:outline-none"
                                placeholder="student@university.edu" maxlength="60">
                            <button type="button" onclick="copyEmail()"
                                class="copy-btn bg-blue-500 hover:bg-blue-600 text-white px-4 rounded-lg font-medium"
                                title="Copy Email">
                                üìã
                            </button>
                        </div>
                    </div>

                    <!-- Photo Upload -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            ·∫¢nh Th·∫ª
                        </label>

                        <!-- Random Avatar Selection -->
                        <div class="mb-3">
                            <p class="text-xs text-gray-600 mb-2">Ch·ªçn ·∫£nh m·∫´u:</p>
                            <div class="flex gap-2 overflow-x-auto pb-2">
                                <img src="https://i.pravatar.cc/150?img=12"
                                    class="avatar-option w-16 h-16 rounded-lg object-cover" onclick="selectAvatar(this)"
                                    alt="Avatar 1">
                                <img src="https://i.pravatar.cc/150?img=47"
                                    class="avatar-option w-16 h-16 rounded-lg object-cover" onclick="selectAvatar(this)"
                                    alt="Avatar 2">
                                <img src="https://i.pravatar.cc/150?img=33"
                                    class="avatar-option w-16 h-16 rounded-lg object-cover" onclick="selectAvatar(this)"
                                    alt="Avatar 3">
                                <img src="https://i.pravatar.cc/150?img=65"
                                    class="avatar-option w-16 h-16 rounded-lg object-cover" onclick="selectAvatar(this)"
                                    alt="Avatar 4">
                                <img src="https://i.pravatar.cc/150?img=56"
                                    class="avatar-option w-16 h-16 rounded-lg object-cover" onclick="selectAvatar(this)"
                                    alt="Avatar 5">
                            </div>
                        </div>

                        <div class="upload-zone rounded-lg p-6 text-center cursor-pointer" id="uploadZone">
                            <input type="file" id="photoUpload" accept="image/jpeg,image/png,image/jpg" class="hidden">
                            <svg class="w-12 h-12 mx-auto text-gray-400 mb-3" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z">
                                </path>
                            </svg>
                            <p class="text-sm text-gray-600 font-medium">
                                Click ƒë·ªÉ t·∫£i ·∫£nh t·ª´ m√°y
                            </p>
                            <p class="text-xs text-gray-500 mt-1">
                                JPG, PNG (t·ªëi ƒëa 5MB)
                            </p>
                        </div>
                    </div>

                    <!-- Download Button -->
                    <button type="button" id="downloadBtn"
                        class="btn-download w-full py-4 rounded-lg text-white font-bold text-lg shadow-lg">
                        <div class="flex items-center justify-center">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                            T·∫£i Th·∫ª V·ªÅ (PNG)
                        </div>
                    </button>
                </form>
            </div>

            <!-- Right Side - Card Preview -->
            <div class="fade-in">
                <div class="glass-card rounded-2xl shadow-2xl p-6 md:p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
                            </path>
                        </svg>
                        Xem Tr∆∞·ªõc Th·∫ª
                    </h2>

                    <!-- Student Card -->
                    <div id="studentCard" class="student-card p-6 aspect-[1.6/1] relative">
                        <!-- Card Header -->
                        <div class="card-header rounded-t-lg p-4 text-center mb-4">
                            <!-- School Logo Placeholder -->
                            <div class="flex items-center justify-center mb-2">
                                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg">
                                    <svg class="w-10 h-10 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                        <path
                                            d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z" />
                                    </svg>
                                </div>
                            </div>
                            <h3 class="text-white font-bold text-base" id="universityName">TR∆Ø·ªúNG ƒê·∫†I H·ªåC ABC</h3>
                            <p class="text-white text-xs opacity-90" id="universityNameEn">ABC UNIVERSITY</p>
                        </div>

                        <div class="flex gap-4 mb-3">
                            <!-- Photo Section -->
                            <div
                                class="photo-placeholder w-28 h-36 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0">
                                <img id="cardPhoto" class="w-full h-full object-cover hidden" alt="Student Photo">
                                <svg id="cardPhotoPlaceholder" class="w-14 h-14 text-gray-400" fill="currentColor"
                                    viewBox="0 0 24 24">
                                    <path
                                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                                </svg>
                            </div>

                            <!-- Info Section -->
                            <div class="flex-1 text-white space-y-1.5">
                                <div>
                                    <p class="text-xs opacity-75 uppercase">H·ªç v√† T√™n</p>
                                    <p id="cardName" class="font-bold text-sm">---</p>
                                </div>
                                <div>
                                    <p class="text-xs opacity-75 uppercase">Ng√†y Sinh</p>
                                    <p id="cardDob" class="font-bold text-xs">---</p>
                                </div>
                                <div>
                                    <p class="text-xs opacity-75 uppercase">M√£ SV</p>
                                    <p id="cardId" class="font-bold text-sm">---</p>
                                </div>
                                <div>
                                    <p class="text-xs opacity-75 uppercase">Khoa</p>
                                    <p id="cardDept" class="font-bold text-xs leading-tight">---</p>
                                </div>
                                <div>
                                    <p class="text-xs opacity-75 uppercase">Email</p>
                                    <p id="cardEmail" class="font-bold text-xs break-all">---</p>
                                </div>
                            </div>
                        </div>

                        <!-- Barcode Section -->
                        <div class="mt-3 bg-white rounded p-2">
                            <div class="barcode rounded"></div>
                            <p class="text-center text-xs mt-1 font-mono" id="cardBarcodeText">*SV123456*</p>
                        </div>

                        <!-- Card Footer -->
                        <div class="absolute bottom-2 right-2 text-white text-xs opacity-75">
                            <p id="cardExpiry">Valid until: 12/2027</p>
                        </div>
                    </div>

                    <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                        <p class="text-sm text-blue-800">
                            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <strong>L∆∞u √Ω:</strong> Click n√∫t qu·ªëc gia ƒë·ªÉ random data ho·∫∑c nh·∫≠p th·ªß c√¥ng
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-white opacity-75">
            <p class="text-sm">
                Made with ‚ù§Ô∏è for educational purposes ‚Ä¢
                <a href="https://github.com/ThanhNguyxn/student-card-generator" target="_blank"
                    class="underline hover:opacity-100">
                    GitHub Repository
                </a>
            </p>
        </div>
    </div>

    <script>
        // University Database with Real Data
        const universities = {
            india: [
                { name: "Indian Institute of Technology Delhi", nameEn: "IIT Delhi", domain: "iitd.ac.in", color1: "#1e3c72", color2: "#2a5298" },
                { name: "University of Mumbai", nameEn: "Mumbai University", domain: "mu.ac.in", color1: "#0f2027", color2: "#203a43" },
                { name: "Delhi University", nameEn: "University of Delhi", domain: "du.ac.in", color1: "#360033", color2: "#0b8793" },
                { name: "Jawaharlal Nehru University", nameEn: "JNU", domain: "jnu.ac.in", color1: "#000428", color2: "#004e92" },
                { name: "Banaras Hindu University", nameEn: "BHU", domain: "bhu.ac.in", color1: "#1a2980", color2: "#26d0ce" }
            ],
            us: [
                { name: "Massachusetts Institute of Technology", nameEn: "MIT", domain: "mit.edu", color1: "#8e0e00", color2: "#1f1c18" },
                { name: "Stanford University", nameEn: "Stanford", domain: "stanford.edu", color1: "#8b0000", color2: "#B83280" },
                { name: "Harvard University", nameEn: "Harvard", domain: "harvard.edu", color1: "#A8001E", color2: "#000000" },
                { name: "University of California Berkeley", nameEn: "UC Berkeley", domain: "berkeley.edu", color1: "#003262", color2: "#FDB515" },
                { name: "Yale University", nameEn: "Yale", domain: "yale.edu", color1: "#00356b", color2: "#286dc0" }
            ],
            korea: [
                { name: "ÏÑúÏö∏ÎåÄÌïôÍµê", nameEn: "Seoul National University", domain: "snu.ac.kr", color1: "#003087", color2: "#0059b3" },
                { name: "Ïó∞ÏÑ∏ÎåÄÌïôÍµê", nameEn: "Yonsei University", domain: "yonsei.ac.kr", color1: "#003876", color2: "#0066cc" },
                { name: "Í≥†Î†§ÎåÄÌïôÍµê", nameEn: "Korea University", domain: "korea.ac.kr", color1: "#8B0000", color2: "#DC143C" },
                { name: "ÌïúÏñëÎåÄÌïôÍµê", nameEn: "Hanyang University", domain: "hanyang.ac.kr", color1: "#003087", color2: "#FFD700" },
                { name: "ÏÑ±Í∑†Í¥ÄÎåÄÌïôÍµê", nameEn: "Sungkyunkwan University", domain: "skku.edu", color1: "#005C3F", color2: "#00A651" }
            ],
            japan: [
                { name: "Êù±‰∫¨Â§ßÂ≠¶", nameEn: "The University of Tokyo", domain: "u-tokyo.ac.jp", color1: "#003893", color2: "#0055B8" },
                { name: "‰∫¨ÈÉΩÂ§ßÂ≠¶", nameEn: "Kyoto University", domain: "kyoto-u.ac.jp", color1: "#002147", color2: "#004B87" },
                { name: "Êó©Á®≤Áî∞Â§ßÂ≠¶", nameEn: "Waseda University", domain: "waseda.jp", color1: "#7E1416", color2: "#A41E22" },
                { name: "ÊÖ∂ÊáâÁæ©Â°æÂ§ßÂ≠¶", nameEn: "Keio University", domain: "keio.ac.jp", color1: "#003DA5", color2: "#0066FF" },
                { name: "Â§ßÈò™Â§ßÂ≠¶", nameEn: "Osaka University", domain: "osaka-u.ac.jp", color1: "#004098", color2: "#0059b3" }
            ]
        };

        // Name databases by country
        const names = {
            india: {
                first: ["Aarav", "Vivaan", "Aditya", "Vihaan", "Arjun", "Sai", "Arnav", "Ayaan", "Krishna", "Ishaan", "Ananya", "Diya", "Aadhya", "Saanvi", "Pari", "Kavya", "Anika", "Kiara", "Navya", "Sara"],
                last: ["Sharma", "Verma", "Patel", "Kumar", "Singh", "Das", "Gupta", "Reddy", "Nair", "Iyer", "Joshi", "Malhotra", "Chopra", "Kapoor", "Mehta"]
            },
            us: [
                "James Smith", "Michael Johnson", "Robert Williams", "Maria Garcia", "David Brown", "Jennifer Jones", "John Miller", "Patricia Davis",
                "Christopher Rodriguez", "Sarah Martinez", "Matthew Anderson", "Ashley Taylor", "Joshua Thomas", "Jessica Hernandez", "Daniel Moore",
                "Emily Jackson", "Andrew Martin", "Amanda Lee", "Ryan Thompson", "Lisa White"
            ],
            korea: {
                last: ["ÍπÄ", "Ïù¥", "Î∞ï", "Ïµú", "Ï†ï", "Í∞ï", "Ï°∞", "Ïú§", "Ïû•", "ÏûÑ"],
                first: ["ÎØºÏ§Ä", "ÏÑúÏ§Ä", "ÏòàÏ§Ä", "ÎèÑÏú§", "ÏãúÏö∞", "Ï£ºÏõê", "ÌïòÏ§Ä", "ÏßÄÌò∏", "ÏÑúÏó∞", "ÏÑúÏïÑ", "ÎØºÏÑú", "ÌïòÏùÄ", "ÏßÄÏö∞", "Ï±ÑÏõê", "ÏßÄÏïà"]
            },
            japan: {
                last: ["‰ΩêËó§", "Èà¥Êú®", "È´òÊ©ã", "Áî∞‰∏≠", "Ê∏°Ëæ∫", "‰ºäËó§", "Â±±Êú¨", "‰∏≠Êùë", "Â∞èÊûó", "Âä†Ëó§"],
                first: ["Â§™ÈÉé", "Ëä±Â≠ê", "‰∏ÄÈÉé", "ÁæéÂí≤", "ÂÅ•Â§™", "ÈôΩËèú", "ÁøîÂ§™", "ÁµêË°£", "Â§ßËºù", "„Åï„Åè„Çâ", "ÊãìÊµ∑", "Âáõ", "ÊÇ†Êñó", "Ëëµ", "ËìÆ"]
            }
        };

        // Departments by country
        const departments = {
            india: ["Computer Science", "Electrical Engineering", "Mechanical Engineering", "Business Administration", "Economics"],
            us: ["Computer Science", "Business Administration", "Psychology", "Biology", "Engineering"],
            korea: ["Ïª¥Ìì®ÌÑ∞Í≥µÌïô", "Í≤ΩÏòÅÌïô", "Ï†ÑÏûêÍ≥µÌïô", "ÏùòÌïô", "Î≤ïÌïô"],
            japan: ["ÊÉÖÂ†±Â∑•Â≠¶", "ÁµåÂñ∂Â≠¶", "ÈõªÊ∞óÈõªÂ≠êÂ∑•Â≠¶", "ÂåªÂ≠¶", "Ê≥ïÂ≠¶"]
        };

        // DOM Elements
        const fullNameInput = document.getElementById('fullName');
        const dobInput = document.getElementById('dob');
        const studentIdInput = document.getElementById('studentId');
        const departmentInput = document.getElementById('department');
        const emailInput = document.getElementById('email');
        const photoUploadInput = document.getElementById('photoUpload');
        const uploadZone = document.getElementById('uploadZone');
        const downloadBtn = document.getElementById('downloadBtn');

        // Card Elements
        const cardName = document.getElementById('cardName');
        const cardDob = document.getElementById('cardDob');
        const cardId = document.getElementById('cardId');
        const cardDept = document.getElementById('cardDept');
        const cardEmail = document.getElementById('cardEmail');
        const cardPhoto = document.getElementById('cardPhoto');
        const cardPhotoPlaceholder = document.getElementById('cardPhotoPlaceholder');
        const cardBarcodeText = document.getElementById('cardBarcodeText');
        const universityName = document.getElementById('universityName');
        const universityNameEn = document.getElementById('universityNameEn');
        const cardExpiry = document.getElementById('cardExpiry');
        const studentCard = document.getElementById('studentCard');

        let currentUniversity = null;

        // Generate Random Name
        function generateName(country) {
            if (country === 'india') {
                const first = names.india.first[Math.floor(Math.random() * names.india.first.length)];
                const last = names.india.last[Math.floor(Math.random() * names.india.last.length)];
                return `${first} ${last}`;
            } else if (country === 'us') {
                return names.us[Math.floor(Math.random() * names.us.length)];
            } else if (country === 'korea') {
                const last = names.korea.last[Math.floor(Math.random() * names.korea.last.length)];
                const first = names.korea.first[Math.floor(Math.random() * names.korea.first.length)];
                return `${last}${first}`;
            } else if (country === 'japan') {
                const last = names.japan.last[Math.floor(Math.random() * names.japan.last.length)];
                const first = names.japan.first[Math.floor(Math.random() * names.japan.first.length)];
                return `${last} ${first}`;
            }
        }

        // Generate Random Date of Birth
        function generateDOB() {
            const year = Math.floor(Math.random() * 7) + 1998; // 1998-2004
            const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
            const day = String(Math.floor(Math.random() * 28) + 1).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // Generate Student ID
        function generateStudentId(university, year) {
            const prefix = university.nameEn.substring(0, 3).toUpperCase().replace(/\s/g, '');
            const randomNum = Math.floor(Math.random() * 9000) + 1000;
            return `${prefix}${year}${randomNum}`;
        }

        // Generate Email
        function generateEmail(name, university) {
            const cleanName = name.toLowerCase()
                .replace(/[^a-z0-9\s]/g, '')
                .split(' ')
                .filter(part => part.length > 0)
                .join('.');
            const randomNum = Math.floor(Math.random() * 999);
            return `${cleanName}${randomNum}@${university.domain}`;
        }

        // Generate Random Avatar URL
        function generateRandomAvatar() {
            const randomId = Math.floor(Math.random() * 70) + 1;
            return `https://i.pravatar.cc/150?img=${randomId}`;
        }

        // Generate by Country
        function generateByCountry(country) {
            const universityList = universities[country];
            currentUniversity = universityList[Math.floor(Math.random() * universityList.length)];

            // Generate data
            const name = generateName(country);
            const dob = generateDOB();
            const year = dob.substring(2, 4);
            const studentId = generateStudentId(currentUniversity, year);
            const department = departments[country][Math.floor(Math.random() * departments[country].length)];
            const email = generateEmail(name, currentUniversity);
            const avatar = generateRandomAvatar();

            // Fill form
            fullNameInput.value = name;
            dobInput.value = dob;
            studentIdInput.value = studentId;
            departmentInput.value = department;
            emailInput.value = email;

            // Update card
            updateCard();

            // Update university info
            universityName.textContent = currentUniversity.name;
            universityNameEn.textContent = currentUniversity.nameEn;

            // Update card colors
            studentCard.style.background = `linear-gradient(135deg, ${currentUniversity.color1} 0%, ${currentUniversity.color2} 100%)`;

            // Set random avatar
            cardPhoto.src = avatar;
            cardPhoto.classList.remove('hidden');
            cardPhotoPlaceholder.classList.add('hidden');

            // Calculate expiry (4 years from enrollment)
            const expiryYear = parseInt(dob.substring(0, 4)) + 22; // Assuming 18 years old at enrollment + 4 years
            cardExpiry.textContent = `Valid until: 12/${expiryYear}`;
        }

        // Update Card Function
        function updateCard() {
            cardName.textContent = fullNameInput.value || '---';
            cardDob.textContent = dobInput.value ? new Date(dobInput.value).toLocaleDateString('en-GB') : '---';
            cardId.textContent = studentIdInput.value || '---';
            cardDept.textContent = departmentInput.value || '---';
            cardEmail.textContent = emailInput.value || '---';
            cardBarcodeText.textContent = studentIdInput.value ? `*${studentIdInput.value}*` : '*SV123456*';
        }

        // Copy Email Function
        function copyEmail() {
            const email = emailInput.value;
            if (email) {
                navigator.clipboard.writeText(email).then(() => {
                    const btn = event.target;
                    const originalText = btn.textContent;
                    btn.textContent = '‚úì';
                    btn.style.background = '#10b981';
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.style.background = '';
                    }, 1500);
                });
            }
        }

        // Select Avatar
        function selectAvatar(img) {
            // Remove selection from all avatars
            document.querySelectorAll('.avatar-option').forEach(av => av.classList.remove('selected'));
            // Add selection to clicked avatar
            img.classList.add('selected');

            // Update card photo
            cardPhoto.src = img.src;
            cardPhoto.classList.remove('hidden');
            cardPhotoPlaceholder.classList.add('hidden');
        }

        // Real-time Update Listeners
        fullNameInput.addEventListener('input', updateCard);
        dobInput.addEventListener('input', updateCard);
        studentIdInput.addEventListener('input', updateCard);
        departmentInput.addEventListener('input', updateCard);
        emailInput.addEventListener('input', updateCard);

        // Photo Upload Handling
        uploadZone.addEventListener('click', () => {
            photoUploadInput.click();
        });

        photoUploadInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const validTypes = ['image/jpeg', 'image/png', 'image/jpg'];
                if (!validTypes.includes(file.type)) {
                    alert('Vui l√≤ng ch·ªçn file ·∫£nh ƒë·ªãnh d·∫°ng JPG ho·∫∑c PNG!');
                    return;
                }

                const maxSize = 5 * 1024 * 1024;
                if (file.size > maxSize) {
                    alert('K√≠ch th∆∞·ªõc ·∫£nh ph·∫£i nh·ªè h∆°n 5MB!');
                    return;
                }

                const reader = new FileReader();
                reader.onload = (event) => {
                    cardPhoto.src = event.target.result;
                    cardPhoto.classList.remove('hidden');
                    cardPhotoPlaceholder.classList.add('hidden');

                    // Remove selection from avatar options
                    document.querySelectorAll('.avatar-option').forEach(av => av.classList.remove('selected'));
                };
                reader.readAsDataURL(file);
            }
        });

        // Download Card as PNG
        downloadBtn.addEventListener('click', async () => {
            try {
                downloadBtn.innerHTML = `
                    <div class="flex items-center justify-center">
                        <svg class="animate-spin w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                        ƒêang x·ª≠ l√Ω...
                    </div>
                `;
                downloadBtn.disabled = true;

                const canvas = await html2canvas(studentCard, {
                    scale: 2,
                    backgroundColor: null,
                    logging: false,
                    useCORS: true
                });

                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    const studentId = studentIdInput.value || 'student';
                    link.download = `student-card-${studentId}.png`;
                    link.href = url;
                    link.click();
                    URL.revokeObjectURL(url);

                    downloadBtn.innerHTML = `
                        <div class="flex items-center justify-center">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                            T·∫£i Th·∫ª V·ªÅ (PNG)
                        </div>
                    `;
                    downloadBtn.disabled = false;
                }, 'image/png');
            } catch (error) {
                console.error('Error generating image:', error);
                alert('C√≥ l·ªói x·∫£y ra khi t·∫°o ·∫£nh. Vui l√≤ng th·ª≠ l·∫°i!');
                downloadBtn.innerHTML = `
                    <div class="flex items-center justify-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                        </svg>
                        T·∫£i Th·∫ª V·ªÅ (PNG)
                    </div>
                `;
                downloadBtn.disabled = false;
            }
        });

        // Drag and Drop
        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.style.borderColor = '#667eea';
            uploadZone.style.background = 'rgba(102, 126, 234, 0.1)';
        });

        uploadZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            uploadZone.style.borderColor = '#cbd5e1';
            uploadZone.style.background = '';
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.style.borderColor = '#cbd5e1';
            uploadZone.style.background = '';

            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(file);
                photoUploadInput.files = dataTransfer.files;
                photoUploadInput.dispatchEvent(new Event('change', { bubbles: true }));
            }
        });
    </script>
</body>

</html>